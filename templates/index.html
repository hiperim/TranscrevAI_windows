<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TranscrevAI - Transcri√ß√£o e Diariza√ß√£o Inteligentes</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="container">
        <h1>TranscrevAI</h1>
        <p class="subtitle">Transcri√ß√£o e Diariza√ß√£o Inteligentes</p>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('recording')">
                Grava√ß√£o Ao Vivo
            </div>
            <div class="tab" onclick="switchTab('upload')">
                Upload de Arquivo
            </div>
        </div>

        <!-- Tab de Grava√ß√£o Ao Vivo -->
        <div id="recording-tab" class="tab-content active">
            <div class="card">
                <div class="format-selector">
                    <label class="format-label">Formato de grava√ß√£o:</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="audio-format" value="wav" checked>
                            <span>WAV (melhor qualidade)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="audio-format" value="mp4">
                            <span>MP4 (V√≠deo - visualizar com legenda .srt)</span>
                        </label>
                    </div>
                </div>

                <div class="button-row">
                    <button class="button button-primary" id="start-live-btn">
                        Iniciar Grava√ß√£o
                    </button>
                    <button class="button button-warning" id="pause-live-btn" disabled>
                        Pausar
                    </button>
                    <button class="button button-primary" id="resume-live-btn" disabled>
                        Resumir
                    </button>
                    <button class="button button-danger" id="stop-live-btn" disabled>
                        Parar Grava√ß√£o
                    </button>
                </div>

                <div class="center">
                    <div id="recording-timer" class="timer">00:00</div>
                </div>

                <div class="center mb-2">
                    <div id="live-status" class="status-indicator">Desconectado</div>
                </div>
            </div>
        </div>

        <!-- Tab de Upload -->
        <div id="upload-tab" class="tab-content">
            <div class="card">

                <div class="file-drop-zone" onclick="document.getElementById('file-input').click()">
                    <p><strong>Clique aqui ou arraste um arquivo de √°udio</strong></p>
                    <p>Formatos suportados: WAV, MP3, M4A, FLAC, OGG</p>
                    <input type="file" id="file-input" class="file-input" accept=".wav,.mp3,.m4a,.flac,.ogg">
                </div>

                <div class="button-row">
                    <button class="button button-primary" id="upload-btn" onclick="processUpload()" disabled>
                        Processar Arquivo
                    </button>
                </div>
            </div>
        </div>

        <!-- Status de Processamento -->
        <div class="status" id="status">
            <h3>Status do Processamento</h3>
            <div class="spinner" id="loading-spinner"></div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <p id="status-text">Aguardando...</p>
        </div>

        <!-- Resultados -->
        <div class="results" id="results">
            <div class="stats-grid" id="stats"></div>

            <div class="button-row">
                <button class="button button-secondary" id="download-audio-btn" style="display: none;">
                    Baixar √Åudio
                </button>
                <button class="button button-secondary" id="download-btn" onclick="downloadSRT()" disabled>
                    Baixar Legendas (SRT)
                </button>
            </div>

            <div id="transcription-results"></div>
        </div>
    </div>

    <script>
        // Inline test to verify JavaScript is running
        console.log('‚úÖ INLINE TEST: JavaScript is working!');
        console.log('üìÑ Current URL:', window.location.href);
        console.log('üìÅ Document ready state:', document.readyState);
    </script>
    <script src="/static/app.js?v=3"></script>
    <script>
        // Verify app.js loaded
        window.addEventListener('load', () => {
            console.log('üîç Window loaded, checking if app.js functions exist...');
            console.log('LiveRecorder class exists:', typeof LiveRecorder !== 'undefined');
        });
    </script>
</body>
</html>
